module.exports=__NEXT_REGISTER_PAGE("/mana/tag",function(){var e=webpackJsonp([8],{147:function(e,t,n){"use strict";n.d(t,"h",function(){return o});n.d(t,"b",function(){return u});n.d(t,"e",function(){return i});n.d(t,"j",function(){return c});n.d(t,"c",function(){return l});n.d(t,"a",function(){return f});n.d(t,"d",function(){return s});n.d(t,"f",function(){return p});n.d(t,"i",function(){return d});n.d(t,"g",function(){return v});var r=n(163);var a=n(179);var o=function e(t,n){return new Promise(function(e,o){r["a"].fetch(a["n"],{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then(function(t){e(t.result)}).catch(function(e){o(e.error||"未知错误")})})};var u=function e(t){return new Promise(function(e,n){r["a"].authFetch(a["c"],t,{method:"post"}).then(function(t){e(t)}).catch(function(e){n(e.error||"未知错误")})})};var i=function e(t){return new Promise(function(e,n){r["a"].fetch("".concat(a["f"],"?page=").concat(t)).then(function(t){t&&e({blogs:t.content,total:Math.ceil(t.totalElements/t.size),current:t.number+1});n(t)}).catch(function(e){n(e.error||"未知错误")})})};var c=function e(t,n){return new Promise(function(e,o){r["a"].fetch("".concat(a["o"]),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({blogId:t,type:n})}).then(function(n){var r=n.ifPub;e({blogId:t,ifPub:r})}).catch(function(e){o(e.error||"未知错误")})})};var l=function e(t){return new Promise(function(e,n){r["a"].fetch("".concat(a["d"],"?blogId=").concat(t),{method:"delete"}).then(function(t){e(t)}).catch(function(e){n(e.error||"未知错误")})})};var f=function e(t){return new Promise(function(e,n){r["a"].fetch(a["b"],{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:t})}).then(function(t){e(t)}).catch(function(e){n(e.error||"未知错误")})})};var s=function e(t){return new Promise(function(e,n){r["a"].fetch(a["e"],{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagId:t})}).then(function(t){e(t)}).catch(function(e){n(e.error||"未知错误")})})};var p=function e(t,n){return new Promise(function(e,o){r["a"].authFetch("".concat(a["k"]).concat(n),t).then(function(t){e(t)}).catch(function(e){o(e.error||"未知错误")})})};var d=function e(t){return new Promise(function(e,n){r["a"].fetch(a["a"],{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){e(t)}).catch(function(e){n(e.error||"未知错误")})})};var v=function e(){return new Promise(function(e,t){r["a"].fetch(a["l"]).then(function(t){e(t)}).catch(function(e){t(e.error||"未知错误")})})}},157:function(e,t,n){e.exports=n(164)},164:function(e,t,n){"use strict";var r=n(171);var a=n(23);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(n(372));var u=a(n(165));var i=a(n(174));var c=a(n(149));var l=a(n(150));var f=a(n(175));var s=a(n(176));var p=a(n(380));var d=n(379);var v=r(n(1));var h=a(n(2));var y=a(n(167));var b=r(n(367));var g=n(158);var m=function(e){(0,s.default)(t,e);function t(e){var n;var r;(0,c.default)(this,t);for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];r=(0,f.default)(this,(n=t.__proto__||(0,i.default)(t)).call.apply(n,[this,e].concat(o)));r.linkClicked=r.linkClicked.bind((0,p.default)(r));r.formatUrls(e);return r}(0,l.default)(t,[{key:"componentWillReceiveProps",value:function e(t){this.formatUrls(t)}},{key:"linkClicked",value:function e(t){var n=this;if("A"===t.currentTarget.nodeName&&(t.metaKey||t.ctrlKey||t.shiftKey||t.nativeEvent&&2===t.nativeEvent.which))return;var r=this.props.shallow;var a=this.href,o=this.as;if(!_(a))return;var u=window.location.pathname;a=(0,d.resolve)(u,a);o=o?(0,d.resolve)(u,o):a;t.preventDefault();var i=this.props.scroll;null==i&&(i=o.indexOf("#")<0);var c=this.props.replace;var l=c?"replace":"push";b.default[l](a,o,{shallow:r}).then(function(e){if(!e)return;if(i){window.scrollTo(0,0);document.body.focus()}}).catch(function(e){n.props.onError&&n.props.onError(e)})}},{key:"prefetch",value:function e(){if(!this.props.prefetch)return;if("undefined"===typeof window)return;var t=window.location.pathname;var n=(0,d.resolve)(t,this.href);b.default.prefetch(n)}},{key:"componentDidMount",value:function e(){this.prefetch()}},{key:"componentDidUpdate",value:function e(t){(0,u.default)(this.props.href)!==(0,u.default)(t.href)&&this.prefetch()}},{key:"formatUrls",value:function e(t){this.href=t.href&&"object"===(0,o.default)(t.href)?(0,d.format)(t.href):t.href;this.as=t.as&&"object"===(0,o.default)(t.as)?(0,d.format)(t.as):t.as}},{key:"render",value:function e(){var t=this.props.children;var n=this.href,r=this.as;"string"===typeof t&&(t=v.default.createElement("a",null,t));var a=v.Children.only(t);var o={onClick:this.linkClicked};!this.props.passHref&&("a"!==a.type||"href"in a.props)||(o.href=r||n);o.href&&"undefined"!==typeof __NEXT_DATA__&&__NEXT_DATA__.nextExport&&(o.href=(0,b._rewriteUrlForNextExport)(o.href));return v.default.cloneElement(a,o)}}]);return t}(v.Component);t.default=m;Object.defineProperty(m,"propTypes",{configurable:true,enumerable:true,writable:true,value:(0,y.default)({href:h.default.oneOfType([h.default.string,h.default.object]).isRequired,as:h.default.oneOfType([h.default.string,h.default.object]),prefetch:h.default.bool,replace:h.default.bool,shallow:h.default.bool,passHref:h.default.bool,scroll:h.default.bool,children:h.default.oneOfType([h.default.element,function(e,t){var n=e[t];"string"===typeof n&&E("Warning: You're using a string directly inside <Link>. This usage has been deprecated. Please add an <a> tag as child of <Link>");return null}]).isRequired})});function _(e){var t=(0,d.parse)(e,false,true);var n=(0,d.parse)((0,g.getLocationOrigin)(),false,true);return!t.host||t.protocol===n.protocol&&t.host===n.host}var E=(0,g.execOnce)(g.warn)},165:function(e,t,n){e.exports=n(166)},166:function(e,t,n){var r=n(15);var a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function e(t){return a.stringify.apply(a,arguments)}},167:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t["default"]=y;var r=n(381);var a=l(r);var o=n(168);var u=l(o);var i=n(169);var c=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true}):e[t]=n;return e}var s="​";var p="prop-types-exact: "+s;var d={};function v(e){return(0,a["default"])(e,f({},p,d))}function h(e){return e&&e[p]===d}function y(e){if(!(0,c["default"])(e))throw new TypeError("given propTypes must be an object");if((0,u["default"])(e,p)&&!h(e[p]))throw new TypeError("Against all odds, you created a propType for a prop that uses both the zero-width space and our custom string - which, sadly, conflicts with `prop-types-exact`");return(0,a["default"])({},e,f({},p,v(function(){function t(t,n,r){var a=Object.keys(t).filter(function(t){return!(0,u["default"])(e,t)});if(a.length>0)return new TypeError(String(r)+": unknown props found: "+String(a.join(", ")));return null}return t}())))}e.exports=t["default"]},168:function(e,t,n){var r=n(382);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},169:function(e,t){Object.defineProperty(t,"__esModule",{value:true});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=r;function r(e){return e&&"object"===("undefined"===typeof e?"undefined":n(e))&&!Array.isArray(e)}e.exports=t["default"]},180:function(e,t,n){"use strict";var r=n(1);var a=n.n(r);var o=n(157);var u=n.n(o);var i=n(2);var c=n.n(i);var l=n(5);var f=function e(t){var n=t.tag,r=t.link,o=t.icon,i=t.onClick;if(r)return a.a.createElement(u.a,{as:"/tag/".concat(n.tagId),href:"/tag/".concat(n.tagId)},a.a.createElement("div",{className:"tag"},a.a.createElement("span",null,n.tagName,o&&a.a.createElement(l["i"],{style:{margin:"0 0 0 0.75rem"},name:o,onClick:function e(){i(n.tagId)}}))));return a.a.createElement(l["l"],null,n.tagName,a.a.createElement(l["i"],{style:{margin:"0 0 0 0.75rem"},name:o,link:true,onClick:function e(){i(n.tagId)}}))};f.defaultProps={link:true,icon:null,onClick:function e(){}};t["a"]=f},387:function(e,t,n){"use strict";n.d(t,"c",function(){return o});n.d(t,"a",function(){return u});n.d(t,"b",function(){return i});var r=n(163);var a=n(179);var o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";t.writeHead(302,{Location:n});t.end()};var u=function e(){return new Promise(function(e,t){r["a"].fetch("".concat(a["g"])).then(function(t){e(t)}).catch(function(e){t(e.error||"未知错误")})})};var i=function e(t,n){return new Promise(function(e,o){r["a"].fetch("".concat(a["h"],"?page=").concat(t,"&tagId=").concat(n)).then(function(t){e(t)}).catch(function(e){o(e.error||"未知错误")})})}},433:function(e,t,n){"use strict";var r=n(1);var a=n.n(r);var o=n(2);var u=n.n(o);var i=n(180);var c=function e(t){var n=t.tags,r=t.icon,o=t.onClick;var u=n.map(function(e){return a.a.createElement(i["a"],{key:e.tagId,tag:e,link:false,icon:r,onClick:o})});return a.a.createElement("div",{key:"tag-pool",className:"xd-tags",style:{display:"inline-block",marginLeft:".5rem"}},u)};c.defaultProps={tags:[],icon:null,onClick:function e(){}};t["a"]=c},436:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n.d(t,"b",function(){return a});var r={INIT_USER:"INIT_USER",DEL_USER:"DEL_USER"};var a=function e(t){return{type:r.INIT_USER,user:t}};var o=function e(){return{type:r.DEL_USER}}},437:function(e,t,n){"use strict";n.d(t,"a",function(){return u});function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function o(e,t,n){t&&a(e.prototype,t);n&&a(e,n);return e}var u=function(){function e(){r(this,e)}o(e,null,[{key:"indexOf",value:function e(t,n){var r=-1;t&&t.length>0&&t.forEach(function(e,t){n(e)&&(r=t)});return r}}]);return e}()},438:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n.d(t,"b",function(){return l});n.d(t,"e",function(){return f});n.d(t,"f",function(){return p});n.d(t,"d",function(){return d});n.d(t,"c",function(){return h});var r=n(437);var a=n(147);var o={ADD_TAG:"ADD_TAG",ADD_TAG_SUCCESS:"ADD_TAG_SUCCESS",ADD_TAG_ERROR:"ADD_TAG_ERROR",DEL_TAG_SUCCESS:"DEL_TAG_SUCCESS",CLEAR_TAG_ERROR:"CLEAR_TAG_ERROR",INIT_TAGS:"INIT_TAGS",SHOW_DEL_MODAL:"SHOW_DEL_MODAL",HIDE_DEL_MODAL:"HIDE_DEL_MODAL"};var u=function e(){return{type:o.ADD_TAG}};var i=function e(t){return{type:o.ADD_TAG_SUCCESS,tag:t}};var c=function e(t){return{type:o.ADD_TAG_ERROR,error:t}};var l=function e(t){return function(e,n){var o=n().tag.tags;if(r["a"].indexOf(o,function(e){return e===t})>=0)return e(c("".concat(t," 标签已经存在")));e(u());return Object(a["a"])(t).then(function(t){e(i(t))}).catch(function(t){e(c(t))})}};var f=function e(t){return{type:o.INIT_TAGS,tags:t}};var s=function e(){return{type:o.CLEAR_TAG_ERROR}};var p=function e(t){return{type:o.SHOW_DEL_MODAL,tagId:t}};var d=function e(){return{type:o.HIDE_DEL_MODAL}};var v=function e(t){return{type:o.DEL_TAG_SUCCESS,tagId:t}};var h=function e(t){return function(e){return Object(a["d"])(t).then(function(t){e(v(t.tagId));e(d())}).catch(function(e){console.error(e)})}}},487:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"d",function(){return c});n.d(t,"b",function(){return l});n.d(t,"g",function(){return s});n.d(t,"f",function(){return p});n.d(t,"e",function(){return d});n.d(t,"c",function(){return h});var r=n(147);var a={FETCH_ALL_BLOG:"FETCH_ALL_BLOG",FETCH_ALL_BLOG_SUCCESS:"FETCH_ALL_BLOG_SUCCESS",FETCH_ALL_BLOG_ERROR:"FETCH_ALL_BLOG_ERROR",CHANGE_CURRENT_PAGE:"CHANGE_CURRENT_PAGE",CHANGE_TOTAL_PAGE:"CHANGE_TOTAL_PAGE",TOGGLE_BLOG_PUB_SUCCESS:"TOGGLE_BLOG_PUB_SUCCESS",DEL_BLOG_SUCCESS:"DEL_BLOG_SUCCESS",SHOW_DEL_BLOG_MODAL:"SHOW_DEL_BLOG_MODAL",HIDE_DEL_BLOG_MODAL:"HIDE_DEL_BLOG_MODAL"};var o=function e(){return{type:a.FETCH_ALL_BLOG}};var u=function e(t,n,r){return{type:a.FETCH_ALL_BLOG_SUCCESS,blogs:t,total:n,current:r}};var i=function e(t){return{type:a.FETCH_ALL_BLOG,error:t}};var c=function e(t){return function(e,n){var a=n().blog.loading;a&&e(i("请求中，稍后再试"));e(o());return Object(r["e"])(t).then(function(t){var n=t.blogs,r=t.total,a=t.current;e(u(n,r,a))}).catch(function(t){e(i(t))})}};var l=function e(t){return{type:a.CHANGE_CURRENT_PAGE,current:t}};var f=function e(t){return{type:a.CHANGE_TOTAL_PAGE,total:t}};var s=function e(t,n){return function(e){return Object(r["j"])(t,n).then(function(t){var n=t.blogId,r=t.ifPub;e({type:a.TOGGLE_BLOG_PUB_SUCCESS,blogId:n,ifPub:r})}).catch(function(e){console.error(e)})}};var p=function e(t){return{type:a.SHOW_DEL_BLOG_MODAL,blogId:t}};var d=function e(){return{type:a.HIDE_DEL_BLOG_MODAL}};var v=function e(t){return{type:a.DEL_BLOG_SUCCESS,blogId:t}};var h=function e(t){return function(e){return Object(r["c"])(t).then(function(t){e(v(t.blogId));e(d())}).catch(function(e){console.error(e)})}}},546:function(e,t,n){"use strict";var r=n(13);var a=n(162);var o=n(436);var u={user:null};var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;var n=arguments.length>1?arguments[1]:void 0;switch(n.type){case o["a"].INIT_USER:return Object.assign({},t,{user:n.user});default:return t}};var c=i;var l=n(487);var f=n(437);function s(e){return v(e)||d(e)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var h={loading:false,error:null,blogs:[],total:0,current:0,modal:false};var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;var n=arguments.length>1?arguments[1]:void 0;switch(n.type){case l["a"].FETCH_ALL_BLOG:return Object.assign({},t,{loading:true});case l["a"].FETCH_ALL_BLOG_SUCCESS:var r=n.blogs,a=n.total,o=n.current;return Object.assign({},t,{loading:false,blogs:r,total:a,current:o});case l["a"].FETCH_ALL_BLOG_ERROR:return Object.assign({},t,{loading:false,error:n.error});case l["a"].CHANGE_CURRENT_PAGE:return Object.assign({},t,{current:n.current});case l["a"].TOGGLE_BLOG_PUB_SUCCESS:var u=n.blogId,i=n.ifPub;var c=f["a"].indexOf(t.blogs,function(e){return e.blogId===u});var p=s(t.blogs);c>=0&&(p[c].ifPub=i);return Object.assign({},t,{blogs:p});case l["a"].SHOW_DEL_BLOG_MODAL:return Object.assign({},t,{modal:true,delBlogId:n.blogId});case l["a"].HIDE_DEL_BLOG_MODAL:return Object.assign({},t,{modal:false});case l["a"].DEL_BLOG_SUCCESS:return Object.assign({},t,{blogs:t.blogs.filter(function(e){return e.blogId!==n.blogId})});default:return t}};var b=y;var g=n(438);function m(e){return O(e)||E(e)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function O(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var S={tags:null,loading:false,error:null,modal:false};var A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;var n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g["a"].INIT_TAGS:return Object.assign({},t,{tags:n.tags});case g["a"].ADD_TAG:return Object.assign({},t,{loading:true,error:null});case g["a"].ADD_TAG_SUCCESS:return Object.assign({},t,{tags:m(t.tags).concat([n.tag])});case g["a"].ADD_TAG_ERROR:return Object.assign({},t,{error:n.error});case g["a"].CLEAR_TAG_ERROR:return Object.assign({},t,{error:null});case g["a"].SHOW_DEL_MODAL:return Object.assign({},t,{modal:true,delTagId:n.tagId});case g["a"].HIDE_DEL_MODAL:return Object.assign({},t,{modal:false});case g["a"].DEL_TAG_SUCCESS:return Object.assign({},t,{tags:t.tags.filter(function(e){return e.tagId!==n.tagId})});default:return t}};var T=A;var C=Object(r["combineReducers"])({auth:c,blog:b,tag:T});var L=function e(){return Object(r["createStore"])(C,a["a"])};var w=t["a"]=L},547:function(e,t,n){"use strict";var r=n(21);var a=n.n(r);var o=n(1);var u=n.n(o);var i=n(152);var c=n(13);var l=n(5);var f=n(408);var s=n(409);var p=n(186);var d=n(147);var v=n(436);var h=n(398);var y=n(539);var b=n(2);var g=n.n(b);var m=n(157);var _=n.n(m);var E=this;var O=function e(t){var n=t.active;return u.a.createElement(l["o"],{pointing:true,secondary:true},u.a.createElement(_.a,{href:"/mana/blog",prefetch:true},u.a.createElement(l["o"].Item,{name:"blog",active:"blog"===n},u.a.createElement(l["i"],{name:"file"}))),u.a.createElement(_.a,{href:"/mana/tag",prefetch:true},u.a.createElement(l["o"].Item,{name:"tag",active:"tag"===n},u.a.createElement(l["i"],{name:"tag"}))),u.a.createElement("a",{href:"/mana/add",prefetch:true},u.a.createElement(l["o"].Item,{name:"add"},u.a.createElement(l["i"],{name:"add"}))),u.a.createElement(l["o"].Menu,{position:"right"},u.a.createElement(l["o"].Item,{name:"logout",link:true,active:"logout"===n,onClick:E.handleItemClick},u.a.createElement(l["i"],{name:"sign out",link:true}),"退出")))};var S=O;function A(e){A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return A(e)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e,t){try{var n=o[e](t);var u=n.value}catch(e){a(e);return}n.done?r(u):Promise.resolve(u).then(i,c)}function i(e){u("next",e)}function c(e){u("throw",e)}i()})}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function w(e,t,n){t&&L(e.prototype,t);n&&L(e,n);return e}function j(e,t){if(t&&("object"===A(t)||"function"===typeof t))return t;return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function e(t){return{initUser:Object(c["bindActionCreators"])(v["b"],t)}};var G=t["a"]=function(e){return Object(i["connect"])(null,I)(function(t){k(n,t);function n(){C(this,n);return j(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}w(n,[{key:"componentWillMount",value:function e(){var t=this.props.user;t&&this.props.initUser(t)}},{key:"render",value:function t(){var n=this.props.global||{};return[u.a.createElement(f["a"],{key:"head",title:n.title||p["a"].title}),u.a.createElement(s["a"],{key:"header",logo:n.logo||null,search:n.search||false}),u.a.createElement(l["g"],{centered:true,key:"body",style:{margin:"-1rem 0"}},u.a.createElement(l["g"].Column,{computer:10,plant:13,mobile:16,className:"xd-body"},u.a.createElement(S,{active:n.active}),u.a.createElement(e,this.props),u.a.createElement(l["e"],null),u.a.createElement(y["a"],null)))]}}],[{key:"getInitialProps",value:function(){var t=T(a.a.mark(function t(n){var r,o;return a.a.wrap(function t(a){while(1)switch(a.prev=a.next){case 0:r={};if(!n.req){a.next=4;break}a.next=4;return Object(d["b"])(n.req.headers.cookie).then(function(e){r.user=e}).catch(function(){Object(h["b"])(n.res)});case 4:if(!e.getInitialProps){a.next=9;break}a.next=7;return e.getInitialProps(n);case 7:o=a.sent;return a.abrupt("return",Object.assign(o,r));case 9:return a.abrupt("return",{global:r});case 10:case"end":return a.stop()}},t,this)}));return function e(n){return t.apply(this,arguments)}}()}]);return n}(o["Component"]))}},548:function(e,t,n){"use strict";var r=n(1);var a=n.n(r);var o=n(2);var u=n.n(o);var i=n(5);function c(e){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function s(e,t,n){t&&f(e.prototype,t);n&&f(e,n);return e}function p(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){v(t,e);function t(){l(this,t);return p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s(t,[{key:"render",value:function e(){var t=this.props,n=t.open,r=t.onClose,o=t.title,u=t.content,c=t.onPositive;return a.a.createElement(i["q"],{size:"mini",open:n,onClose:r},a.a.createElement(i["q"].Header,null,o),a.a.createElement(i["q"].Content,null,u),a.a.createElement(i["q"].Actions,null,a.a.createElement(i["a"],{negative:true,onClick:r},"No"),a.a.createElement(i["a"],{positive:true,icon:"checkmark",labelPosition:"right",content:"Yes",onClick:c})))}}]);return t}(r["PureComponent"]);t["a"]=h},996:function(e,t,n){e.exports=n(997)},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(21);var a=n.n(r);var o=n(1);var u=n.n(o);var i=n(2);var c=n.n(i);var l=n(159);var f=n.n(l);var s=n(5);var p=n(13);var d=n(546);var v=n(547);var h=n(433);var y=n(152);var b=n(438);function g(e){g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return g(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function E(e,t,n){t&&_(e.prototype,t);n&&_(e,n);return e}function O(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;return A(e)}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){S(t,e);function t(e){var n;m(this,t);n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleAddTag=n.handleAddTag.bind(A(n));return n}E(t,[{key:"handleAddTag",value:function e(t){if(13===t.keyCode){var n=this.tag.value;this.props.addTagIfNeeded(n);this.tag.value=""}}},{key:"render",value:function e(){var t=this;var n=this.props.error;return u.a.createElement("div",null,u.a.createElement(s["k"],{icon:true,placeholder:"添加标签",onKeyDown:this.handleAddTag},u.a.createElement("input",{ref:function e(n){t.tag=n}}),u.a.createElement(s["i"],{name:"tag"})),n&&u.a.createElement(s["l"],{basic:true,color:"red",pointing:"left"},n))}}]);return t}(o["PureComponent"]);T.defaultProps={error:null};var C=function e(t){return{error:t.tag.error}};var L=function e(t){return{addTagIfNeeded:Object(p["bindActionCreators"])(b["b"],t)}};var w=Object(y["connect"])(C,L)(T);var j=n(387);var D=n(548);function k(e){k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return k(e)}function I(e,t){return R(e)||P(e,t)||G()}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function P(e,t){var n=[];var r=true;var a=false;var o=void 0;try{for(var u=e[Symbol.iterator](),i;!(r=(i=u.next()).done);r=true){n.push(i.value);if(t&&n.length===t)break}}catch(e){a=true;o=e}finally{try{r||null==u["return"]||u["return"]()}finally{if(a)throw o}}return n}function R(e){if(Array.isArray(e))return e}function N(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e,t){try{var n=o[e](t);var u=n.value}catch(e){a(e);return}n.done?r(u):Promise.resolve(u).then(i,c)}function i(e){u("next",e)}function c(e){u("throw",e)}i()})}}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;return F(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function B(e,t,n){t&&x(e.prototype,t);n&&x(e,n);return e}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var W=function(e){M(t,e);B(t,null,[{key:"getInitialProps",value:function(){var e=N(a.a.mark(function e(t){var n;return a.a.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n={logo:{name:"tag",text:"标签管理"},title:"标签管理",active:"tag"};r.next=3;return Object(j["a"])().then(function(e){n.tags=e}).catch(function(){Object(j["c"])(t.res)});case 3:return r.abrupt("return",{global:n});case 4:case"end":return r.stop()}},e,this)}));return function t(n){return e.apply(this,arguments)}}()}]);function t(e){var n;U(this,t);n=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.delTag={};n.handleDeleteTag=n.handleDeleteTag.bind(F(n));return n}B(t,[{key:"componentWillMount",value:function e(){var t=this.props.global.tags;this.props.initTags(t)}},{key:"componentWillReceiveProps",value:function e(t){var n=this.props.delTagId;if(n!==t.delTagId){var r=t.tags.filter(function(e){return t.delTagId===e.tagId}),a=I(r,1),o=a[0];this.delTag=o||{}}}},{key:"handleDeleteTag",value:function e(){this.props.delTagIfNeeded(this.props.delTagId)}},{key:"render",value:function e(){var t=this.props,n=t.tags,r=t.loading,a=t.modal;return[u.a.createElement(w,{key:"tag-input",loading:r}),u.a.createElement(s["e"],{key:"divider",horizontal:true},u.a.createElement("span",{style:{color:"gray"}},"全部标签")),u.a.createElement(h["a"],{key:"tag-group",tags:n,icon:"delete",onClick:this.props.showDelModal}),u.a.createElement(D["a"],{key:"tag-modal",open:a,onClose:this.props.hideDelModal,title:"删除？",content:u.a.createElement("p",null,"确定删除 ",u.a.createElement(s["i"],{name:"tag"}),"「",this.delTag.tagName,"」标签？"),onPositive:this.handleDeleteTag})]}}]);return t}(o["Component"]);W.defaultProps={delTagId:null};var J=function e(t,n){return{tags:t.tag.tags||n.global.tags,loading:t.tag.loading,error:t.tag.error,modal:t.tag.modal,delTagId:t.tag.delTagId}};var q=function e(t){return{initTags:Object(p["bindActionCreators"])(b["e"],t),showDelModal:Object(p["bindActionCreators"])(b["f"],t),hideDelModal:Object(p["bindActionCreators"])(b["d"],t),delTagIfNeeded:Object(p["bindActionCreators"])(b["c"],t)}};var z=t["default"]=f()(d["a"],J,q)(Object(v["a"])(W))}},[996]);return{page:e.default}});